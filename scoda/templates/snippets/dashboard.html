<link rel="stylesheet" href="../../static/vendor/shepherd/css/shepherd-theme-dark.css"/>
<script type="text/javascript">

$(document).ready(function () {

    {% if current_user.tours == True %}

     var tour = new Shepherd.Tour({
                defaults: {
                    classes: 'shepherd-theme-dark',
                    scrollTo: true
                }
            });

            tour.addStep('welcome', {
                title: 'Welcome to your dashboard!',
                text: 'Here you will find all the analyses that you have created and can choose to "Open" them to continue working, or to "Delete" them. ',
                attachTo: '#breadCrumb bottom',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Exit',
                        action: tour.complete
                    },
                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome2', {
                title: 'Welcome to your dashboard!',
                text: 'You can return to this page at any time by clicking on the "My Dashboard" tab in the left-hand navigation bar. This bar can be opened and closed by clicking on the ☰ symbol in the left-hand screen corner. ',
                attachTo: '#breadCrumb bottom',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    },
                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome3', {
                title: 'Welcome to your dashboard!',
                text: 'You can also jump to recent analyses using your right-hand navigation bar. This bar can be opened and closed by clicking on the ☰ icon in the top right-hand screen corner.',
                attachTo: '#breadCrumb bottom',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    },

                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome4', {
                title: 'Using the rest of your navigation...',
                text: 'Your left-hand navigation also provides quick access to the Data Explorer, where you can explore, visualize and download all 102 SCODA datasets.',
                attachTo: '#sideNav right',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    },
                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome5', {
                title: 'Using the rest of your navigation...',
                text: 'The "New Analysis" tab will take you to a page where you can build a custom dataset.',
                attachTo: '#sideNav right',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    },
                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome6', {
                title: 'Using the rest of your navigation...',
                text: 'Clicking on "My Datasets" will take you to a page where you can upload, edit and delete your own custom datasets for use on this platform; and "Demographics" will take you to the demographics model explorer.',
                attachTo: '#sideNav right',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    },
                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome7', {
                title: 'Using the rest of your navigation...',
                text: 'Finally, clicking on "Demographics" will take you to the demographics model explorer.',
                attachTo: '#sideNav right',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    },
                    {
                        text: 'Next',
                        action: tour.next
                    }
                ]
            });

            tour.addStep('welcome8', {
                title: 'Still want tours?',
                text: 'Lastly, when you feel you know your way around the SCODA system, you can switch these guided tours off by clicking on this button. ',
                attachTo: '#sideNav right',
                advanceOn: '.docs-link click',
                buttons: [
                    {
                        text: 'Back',
                        action: tour.back
                    },

                    {
                        text: 'Exit',
                        action: tour.complete
                    }
                ]
            });

            tour.start();

    {% endif %}

})
</script>

<div class="row">
                <div class="col-sm-12 col-lg-12 col-lg-12">
                        {% with messages = get_flashed_messages(category_filter=["email"]) %}
                            {% if messages %}
                                <div class="alert alert-success">
                                    {% for message in messages %}
                                       {{ message }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        {% endwith %}
                </div>
            </div>

            {% if analyses %}
                {% for group in analyses %}
                    <div class="row" style="padding-left: 30px; padding-right: 30px">
                        {% for analysis in group %}
                            {% if analysis %}
                                <div class="col-sm-12 col-md-6 col-lg-3">
                                    <div class="card" id="selectorCard">
                                        <div class="card-header" id="analysis-{{ analysis[0] }}CardHead">{{ analysis[1] }}</div>
                                        <div class="card-block" id="analysis-{{ analysis[0] }}CardBlock">
                                            <p>{{ analysis[2] }}</p>
                                            <div class="row" style="text-align: center">
                                                <a href="/constructor/{{ analysis[0] }}">
                                                    <button class="btn btn-primary" id="openAnalysis">Open</button>
                                                </a>
                                                <a href="/constructor/{{ analysis[0] }}/delete">
                                                    <button class="btn btn-danger" id="deleteAnalysis">Delete</button>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endfor %}
            {% endif %}

<ol id="breadCrumb" class="breadcrumb">
        <li class="breadcrumb-item">My Datasets</li>
        </li>
</ol>

{% if datasets %}
    {% for group in datasets %}
        <div class="row" style="padding-left: 30px; padding-right: 30px ">
            {% for analysis in group %}
                {% if analysis %}
                    <div class="col-sm-12 col-md-6 col-lg-3">
                        <div class="card" id="selectorCard">
                            <div class="card-header" id="analysis-{{ analysis[0] }}CardHead">{{ analysis[1] }}</div>
                            <div class="card-block" id="analysis-{{ analysis[0] }}CardBlock">
                                <p>{{ analysis[2] }}</p>
                                <div class="row" style="text-align: center">
                                    <a href="{{ url_for('my_datasets') }}">
                                        <button class="btn btn-primary" id="openAnalysis">Go To Datasets</button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% endfor %}
{% endif %}

<ol id="breadCrumb" class="breadcrumb">
        <li class="breadcrumb-item">Tours</li>
        </li>
</ol>


<div class="col-sm-12 col-md-6 col-lg-3">
<div class="card" id="selectorCard">
    <div class="card-header" id="analysis-toursCardHead">Toggle Guided Tours</div>
    <div class="card-block" id="analysis-toursCardBlock">
        <div class="row" style="text-align: center">
            <a href="{{ url_for('tours') }}">
                <button class="btn btn-primary" id="tourToggle">{% if current_user.tours == True%}Switch Tours Off{% else %}Switch Tours On{% endif %}</button>
            </a>
        </div>
    </div>
</div>
</div>

